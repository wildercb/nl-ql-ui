import{a as D,r as p,k as M,x as Q,c as n,b as e,p as b,v as T,J as V,t as o,h as $,e as F,n as q,F as w,C as N,o as l}from"./vendor-B7ScCEbZ.js";import{_ as W}from"./index-CAIeypSO.js";const J={class:"flex-1 bg-gray-50 dark:bg-gray-900"},B={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},z={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},H={class:"card"},Y={class:"card-body"},K={class:"mt-4 space-y-2"},X={class:"flex items-center space-x-2"},Z={class:"flex items-center space-x-2"},ee={class:"text-sm text-gray-600 dark:text-gray-400 w-8"},te={class:"flex justify-end space-x-2"},se=["disabled"],ae={key:0,class:"flex items-center"},re={key:1},ne={class:"card"},le={class:"card-body"},oe={key:0,class:"flex items-center justify-center h-32"},ie={key:1,class:"h-32 overflow-auto"},de={class:"text-sm text-gray-800 dark:text-gray-200 bg-gray-100 dark:bg-gray-800 p-4 rounded-md"},ce={key:2,class:"h-32 flex items-center justify-center text-gray-500 dark:text-gray-400"},ue={class:"card"},ge={class:"card-body"},me={key:0,class:"space-y-3"},pe={class:"flex justify-between"},xe={class:"flex justify-between"},ye={class:"text-sm font-medium"},ve={class:"flex justify-between"},_e={class:"text-sm font-medium"},fe={class:"flex justify-between"},ke={class:"text-sm font-medium"},he={key:0,class:"mt-3 p-2 bg-yellow-50 dark:bg-yellow-900/20 rounded"},be={class:"text-xs text-yellow-700 dark:text-yellow-300 mt-1"},we={key:1,class:"h-32 flex items-center justify-center text-gray-500 dark:text-gray-400"},Ne={class:"mt-8 card"},Se={class:"card-body"},Oe={class:"h-96 overflow-auto bg-gray-100 dark:bg-gray-800 rounded-md p-4"},Te={key:0,class:"flex items-center justify-center h-full text-gray-500 dark:text-gray-400"},$e={key:1,class:"space-y-4"},Fe={class:"flex items-center justify-between mb-2"},qe={class:"text-sm font-medium text-gray-900 dark:text-white"},Ce={class:"text-sm text-gray-700 dark:text-gray-300 mb-2"},Ee={key:0,class:"text-xs text-gray-600 dark:text-gray-400"},Ie={class:"whitespace-pre-wrap"},Re={class:"mt-8 grid grid-cols-1 lg:grid-cols-2 gap-8"},je={class:"card"},Le={class:"card-body"},Ue={key:0,class:"space-y-3"},Ae={class:"text-xs text-gray-600 dark:text-gray-400 bg-gray-50 dark:bg-gray-700 p-2 rounded mt-1 overflow-auto max-h-32"},Pe={class:"text-xs text-gray-600 dark:text-gray-400 bg-gray-50 dark:bg-gray-700 p-2 rounded mt-1 overflow-auto max-h-32"},Ge={class:"text-xs text-gray-600 dark:text-gray-400 bg-gray-50 dark:bg-gray-700 p-2 rounded mt-1"},De={key:1,class:"h-32 flex items-center justify-center text-gray-500 dark:text-gray-400"},Me={class:"card"},Qe={class:"card-body"},Ve={key:0,class:"space-y-3"},We={class:"text-xs text-gray-600 dark:text-gray-400 bg-gray-50 dark:bg-gray-700 p-2 rounded mt-1 overflow-auto max-h-32"},Je={class:"text-xs text-gray-600 dark:text-gray-400 bg-gray-50 dark:bg-gray-700 p-2 rounded mt-1 overflow-auto max-h-32"},Be={class:"text-xs text-gray-600 dark:text-gray-400 mt-1"},ze={class:"font-medium"},He={key:1,class:"h-32 flex items-center justify-center text-gray-500 dark:text-gray-400"},Ye=D({__name:"TranslatorView",setup(Ke){const g=p(""),x=p(""),k=p(!1),y=p("phi3:mini"),v=p(.7),h=p([]),i=p(null),_=p(null),f=p(null),C=M(()=>{if(!i.value)return"";const u=i.value.confidence;return u>=.8?"text-green-600 dark:text-green-400":u>=.6?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400"}),r=(u,t,a)=>{const s=new Date().toLocaleTimeString();h.value.unshift({timestamp:s,type:u,message:t,details:a})},E=u=>{switch(u){case"INFO":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-300";case"WARNING":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300";case"ERROR":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-300";case"SUCCESS":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},I=()=>{g.value="",x.value="",i.value=null,_.value=null,f.value=null,r("INFO","Cleared all data")},R=()=>{h.value=[]},j=()=>{const u={timestamp:new Date().toISOString(),query:g.value,result:x.value,metrics:i.value,interactions:h.value},t=new Blob([JSON.stringify(u,null,2)],{type:"application/json"}),a=URL.createObjectURL(t),s=document.createElement("a");s.href=a,s.download=`translation-log-${new Date().toISOString().split("T")[0]}.json`,s.click(),URL.revokeObjectURL(a),r("INFO","Exported interaction log")},L=async()=>{var t;if(!g.value.trim())return;r("INFO",`Starting translation for: "${g.value}"`),r("INFO",`Using model: ${y.value}, temperature: ${v.value}`),k.value=!0,x.value="",i.value=null,_.value=null,f.value=null;const u=Date.now();try{r("INFO","Sending request to streaming translation API...");let a=!0,s=null;try{const m=await fetch("http://localhost:8000/translate/stream",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({natural_query:g.value,model:y.value,temperature:v.value,stream:!0})});if(!m.ok)throw new Error(`HTTP error! status: ${m.status}`);const c=(t=m.body)==null?void 0:t.getReader();if(!c)throw new Error("No response body reader available");const U=new TextDecoder;for(;;){const{done:A,value:P}=await c.read();if(A)break;const G=U.decode(P).split(`
`);for(const S of G)if(S.startsWith("data: ")){const O=S.slice(6);if(O==="[DONE]")break;try{const d=JSON.parse(O);switch(d.step){case"init":r("INFO",d.message);break;case"validate":r("INFO",d.message);break;case"model":r("INFO",d.message);break;case"prompt":r("INFO",d.message);break;case"generate":r("INFO",d.message);break;case"process":r("INFO",d.message);break;case"extract":r("INFO",d.message);break;case"complete":r("SUCCESS",d.message);break;case"result":s=d.data,r("SUCCESS","Final result received");break;case"error":throw r("ERROR",d.message),new Error(d.message)}}catch(d){console.warn("Failed to parse streaming data:",d)}}}}catch(m){r("WARNING",`Streaming failed: ${m.message}, falling back to regular endpoint`),a=!1}if(!a||!s){r("INFO","Using regular translation endpoint...");const m=await fetch("http://localhost:8000/translate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({natural_query:g.value,model:y.value,temperature:v.value})});if(!m.ok)throw new Error(`HTTP error! status: ${m.status}`);const c=await m.json();r("SUCCESS","Translation completed via regular endpoint"),s={graphql_query:c.graphql_query,confidence:c.confidence,explanation:c.explanation,model:c.model,processing_time:c.processing_time,warnings:c.warnings||[],suggested_improvements:c.suggested_improvements||[],prompt_analysis:{system_prompt:"You are an expert GraphQL translator. Convert natural language queries to valid GraphQL syntax.",user_prompt:g.value,parameters:{model:y.value,temperature:v.value,max_tokens:1e3}},response_analysis:{raw_response:c.explanation||"No explanation provided",extracted_graphql:c.graphql_query,processing_steps:["Received natural language query","Analyzed query intent and structure","Generated GraphQL syntax","Validated query structure","Extracted confidence score","Applied post-processing"]}}}if(!s)throw new Error("No final data received from translation response");i.value={confidence:s.confidence,processing_time:s.processing_time,model_used:s.model,tokens_used:s.tokens_used,warnings:s.warnings||[]},s.prompt_analysis&&(_.value=s.prompt_analysis),s.response_analysis&&(f.value=s.response_analysis),s.graphql_query&&!s.graphql_query.startsWith("# Error:")?(x.value=`query {
  ${s.graphql_query}
}

// Confidence: ${(s.confidence*100).toFixed(1)}%
// Model: ${s.model}
// Processing Time: ${s.processing_time.toFixed(2)}s
${s.explanation?`// Explanation: ${s.explanation}`:""}
${s.warnings&&s.warnings.length>0?`// Warnings: ${s.warnings.join(", ")}`:""}
${s.suggested_improvements&&s.suggested_improvements.length>0?`// Suggestions: ${s.suggested_improvements.join(", ")}`:""}`,r("SUCCESS",`Generated GraphQL query with ${(s.confidence*100).toFixed(1)}% confidence`)):(x.value=`${s.graphql_query||"No GraphQL query generated"}

// Error Details:
${s.explanation?`// ${s.explanation}`:""}
${s.warnings&&s.warnings.length>0?`// Warnings: ${s.warnings.join(", ")}`:""}
${s.suggested_improvements&&s.suggested_improvements.length>0?`// Suggestions: ${s.suggested_improvements.join(", ")}`:""}
// Model: ${s.model}
// Processing Time: ${s.processing_time.toFixed(2)}s`,r("WARNING","Translation completed with errors or low confidence")),r("INFO",`Processing time: ${s.processing_time.toFixed(2)}s`,`Model: ${s.model}
Confidence: ${(s.confidence*100).toFixed(1)}%
Tokens: ${s.tokens_used||"N/A"}`)}catch(a){const s=a instanceof Error?a.message:"Unknown error";r("ERROR",`Translation failed: ${s}`),x.value=`Error: Failed to translate query
${s}`,i.value={confidence:0,processing_time:(Date.now()-u)/1e3,model_used:y.value,tokens_used:0,warnings:[s]}}finally{k.value=!1,r("INFO","Translation process completed")}};return Q(()=>{r("INFO","Advanced Translator UI initialized"),r("INFO","Ready to process natural language queries")}),(u,t)=>(l(),n("div",J,[e("div",B,[t[25]||(t[25]=e("div",{class:"text-center mb-8"},[e("h1",{class:"text-3xl font-bold text-gray-900 dark:text-white mb-4"}," Advanced Query Translator "),e("p",{class:"text-lg text-gray-600 dark:text-gray-300"}," Real-time natural language to GraphQL translation with detailed agentic interactions ")],-1)),e("div",z,[e("div",H,[t[7]||(t[7]=e("div",{class:"card-header"},[e("h2",{class:"text-xl font-semibold text-gray-900 dark:text-white"}," Natural Language Query ")],-1)),e("div",Y,[b(e("textarea",{"onUpdate:modelValue":t[0]||(t[0]=a=>g.value=a),class:"textarea h-32",placeholder:"Enter your natural language query here..."},null,512),[[T,g.value]]),e("div",K,[e("div",X,[t[4]||(t[4]=e("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Model:",-1)),b(e("select",{"onUpdate:modelValue":t[1]||(t[1]=a=>y.value=a),class:"select"},t[3]||(t[3]=[e("option",{value:"phi3:mini"},"phi3:mini (Fast)",-1),e("option",{value:"llama2"},"llama2 (Balanced)",-1),e("option",{value:"llama2:13b"},"llama2:13b (High Quality)",-1)]),512),[[V,y.value]])]),e("div",Z,[t[5]||(t[5]=e("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Temperature:",-1)),b(e("input",{"onUpdate:modelValue":t[2]||(t[2]=a=>v.value=a),type:"range",min:"0",max:"1",step:"0.1",class:"flex-1"},null,512),[[T,v.value,void 0,{number:!0}]]),e("span",ee,o(v.value),1)]),e("div",te,[e("button",{onClick:I,class:"btn-outline"}," Clear "),e("button",{onClick:L,disabled:!g.value.trim()||k.value,class:"btn-primary"},[k.value?(l(),n("span",ae,t[6]||(t[6]=[e("div",{class:"spinner-sm mr-2"},null,-1),$(" Translating... ")]))):(l(),n("span",re,"Translate"))],8,se)])])])]),e("div",ne,[t[9]||(t[9]=e("div",{class:"card-header"},[e("h2",{class:"text-xl font-semibold text-gray-900 dark:text-white"}," GraphQL Result ")],-1)),e("div",le,[k.value?(l(),n("div",oe,t[8]||(t[8]=[e("div",{class:"spinner"},null,-1),e("span",{class:"ml-2 text-gray-600 dark:text-gray-300"},"Translating...",-1)]))):x.value?(l(),n("div",ie,[e("pre",de,o(x.value),1)])):(l(),n("div",ce," Translation will appear here "))])]),e("div",ue,[t[15]||(t[15]=e("div",{class:"card-header"},[e("h2",{class:"text-xl font-semibold text-gray-900 dark:text-white"}," Performance Metrics ")],-1)),e("div",ge,[i.value?(l(),n("div",me,[e("div",pe,[t[10]||(t[10]=e("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Confidence:",-1)),e("span",{class:q(["text-sm font-medium",C.value])},o((i.value.confidence*100).toFixed(1))+"%",3)]),e("div",xe,[t[11]||(t[11]=e("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Processing Time:",-1)),e("span",ye,o(i.value.processing_time.toFixed(2))+"s",1)]),e("div",ve,[t[12]||(t[12]=e("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Model Used:",-1)),e("span",_e,o(i.value.model_used),1)]),e("div",fe,[t[13]||(t[13]=e("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Tokens Used:",-1)),e("span",ke,o(i.value.tokens_used||"N/A"),1)]),i.value.warnings&&i.value.warnings.length>0?(l(),n("div",he,[t[14]||(t[14]=e("div",{class:"text-sm font-medium text-yellow-800 dark:text-yellow-200"},"Warnings:",-1)),e("ul",be,[(l(!0),n(w,null,N(i.value.warnings,a=>(l(),n("li",{key:a},"• "+o(a),1))),128))])])):F("",!0)])):(l(),n("div",we," Metrics will appear here "))])])]),e("div",Ne,[e("div",{class:"card-header"},[e("div",{class:"flex justify-between items-center"},[t[16]||(t[16]=e("h2",{class:"text-xl font-semibold text-gray-900 dark:text-white"}," Agentic Interaction Log ",-1)),e("div",{class:"flex space-x-2"},[e("button",{onClick:R,class:"btn-outline-sm"},"Clear Log"),e("button",{onClick:j,class:"btn-outline-sm"},"Export")])])]),e("div",Se,[e("div",Oe,[h.value.length===0?(l(),n("div",Te," No interactions logged yet ")):(l(),n("div",$e,[(l(!0),n(w,null,N(h.value,(a,s)=>(l(),n("div",{key:s,class:"border-l-4 border-blue-500 pl-4 py-2"},[e("div",Fe,[e("span",qe,o(a.timestamp),1),e("span",{class:q(["text-xs px-2 py-1 rounded-full",E(a.type)])},o(a.type),3)]),e("div",Ce,o(a.message),1),a.details?(l(),n("div",Ee,[e("pre",Ie,o(a.details),1)])):F("",!0)]))),128))]))])])]),e("div",Re,[e("div",je,[t[20]||(t[20]=e("div",{class:"card-header"},[e("h2",{class:"text-xl font-semibold text-gray-900 dark:text-white"}," Prompt Analysis ")],-1)),e("div",Le,[_.value?(l(),n("div",Ue,[e("div",null,[t[17]||(t[17]=e("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"System Prompt:",-1)),e("pre",Ae,o(_.value.system_prompt),1)]),e("div",null,[t[18]||(t[18]=e("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"User Prompt:",-1)),e("pre",Pe,o(_.value.user_prompt),1)]),e("div",null,[t[19]||(t[19]=e("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Parameters:",-1)),e("pre",Ge,o(JSON.stringify(_.value.parameters,null,2)),1)])])):(l(),n("div",De," Prompt analysis will appear here "))])]),e("div",Me,[t[24]||(t[24]=e("div",{class:"card-header"},[e("h2",{class:"text-xl font-semibold text-gray-900 dark:text-white"}," Response Analysis ")],-1)),e("div",Qe,[f.value?(l(),n("div",Ve,[e("div",null,[t[21]||(t[21]=e("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Raw Response:",-1)),e("pre",We,o(f.value.raw_response),1)]),e("div",null,[t[22]||(t[22]=e("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Extracted GraphQL:",-1)),e("pre",Je,o(f.value.extracted_graphql),1)]),e("div",null,[t[23]||(t[23]=e("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Processing Steps:",-1)),e("div",Be,[(l(!0),n(w,null,N(f.value.processing_steps,(a,s)=>(l(),n("div",{key:s,class:"mb-1"},[e("span",ze,o(s+1)+".",1),$(" "+o(a),1)]))),128))])])])):(l(),n("div",He," Response analysis will appear here "))])])])])]))}}),tt=W(Ye,[["__scopeId","data-v-cec93dfd"]]);export{tt as default};
//# sourceMappingURL=TranslatorView-559C6G08.js.map

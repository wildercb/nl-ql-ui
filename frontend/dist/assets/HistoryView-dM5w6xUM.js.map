{"version":3,"file":"HistoryView-dM5w6xUM.js","sources":["../../src/views/HistoryView.vue"],"sourcesContent":["<template>\n  <div class=\"flex-1 bg-gray-900 text-white\">\n    <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n      <div class=\"text-center mb-8\">\n        <h1 class=\"text-3xl font-bold\">Query History</h1>\n        <p class=\"text-lg text-gray-400\">\n          Review your past queries and their results.\n        </p>\n      </div>\n      \n      <div v-if=\"isLoading\" class=\"text-center\">\n        <i class=\"fas fa-spinner fa-spin text-3xl\"></i>\n        <p class=\"mt-2\">Loading history...</p>\n      </div>\n\n      <div v-else-if=\"error\" class=\"bg-red-900 border border-red-700 text-red-300 px-4 py-3 rounded-lg\">\n        <p><strong>Error:</strong> {{ error }}</p>\n      </div>\n\n      <div v-else-if=\"history.length === 0\" class=\"text-center text-gray-500 py-8\">\n        <p>No translation history available yet.</p>\n        <p class=\"text-sm mt-2\">Start translating queries to see your history here.</p>\n      </div>\n\n      <div v-else class=\"bg-gray-800 shadow-xl rounded-lg overflow-hidden\">\n        <ul class=\"divide-y divide-gray-700\">\n          <li v-for=\"item in history\" :key=\"item.id\" class=\"p-4 hover:bg-gray-700 transition-colors duration-200\">\n            <div class=\"flex items-center justify-between\">\n              <div class=\"flex-grow\">\n                <p class=\"text-sm text-gray-400 truncate\">{{ new Date(item.timestamp).toLocaleString() }}</p>\n                <p class=\"font-semibold text-white mt-1\">{{ item.natural_query }}</p>\n              </div>\n              <div class=\"flex items-center space-x-4\">\n                <span :class=\"item.confidence > 0.8 ? 'text-green-400' : 'text-yellow-400'\">\n                  Confidence: {{ (item.confidence * 100).toFixed(0) }}%\n                </span>\n                <button @click=\"viewHistoryItem(item)\" class=\"px-3 py-1 bg-blue-600 hover:bg-blue-700 rounded-md text-sm font-semibold\">\n                  View\n                </button>\n              </div>\n            </div>\n          </li>\n        </ul>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, onMounted } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { useAuthStore } from '../stores/auth';\nimport { useHistoryStore } from '../stores/history';\n\nconst authStore = useAuthStore();\nconst historyStore = useHistoryStore();\nconst router = useRouter();\n\nconst history = ref<any[]>([]);\nconst isLoading = ref(true);\nconst error = ref<string | null>(null);\n\nonMounted(async () => {\n  if (authStore.isAuthenticated) {\n    try {\n      const response = await fetch('/api/history', {\n        headers: {\n          'Authorization': `Bearer ${authStore.accessToken}`\n        }\n      });\n      if (!response.ok) {\n        throw new Error('Failed to fetch history.');\n      }\n      const data = await response.json();\n      history.value = data.history || [];\n    } catch (err: any) {\n      error.value = err.message;\n    } finally {\n      isLoading.value = false;\n    }\n  } else if (authStore.isGuestSession) {\n    history.value = authStore.guestHistory;\n    isLoading.value = false;\n  } else {\n    error.value = \"Please sign in or start a guest session to view history.\";\n    isLoading.value = false;\n  }\n});\n\nconst viewHistoryItem = (item: any) => {\n  historyStore.setSelectedHistoryItem(item);\n  router.push('/');\n};\n</script> "],"names":["authStore","useAuthStore","historyStore","useHistoryStore","router","useRouter","history","ref","isLoading","error","onMounted","response","data","err","viewHistoryItem","item","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_cache","_hoisted_4","_createTextVNode","_hoisted_5","_hoisted_6","_hoisted_7","_Fragment","_renderList","_hoisted_8","_hoisted_9","_hoisted_10","_toDisplayString","_hoisted_11","_hoisted_12","_normalizeClass","$event","_hoisted_13"],"mappings":"8yBAsDA,MAAMA,EAAYC,EAAA,EACZC,EAAeC,EAAA,EACfC,EAASC,EAAA,EAETC,EAAUC,EAAW,EAAE,EACvBC,EAAYD,EAAI,EAAI,EACpBE,EAAQF,EAAmB,IAAI,EAErCG,EAAU,SAAY,CACpB,GAAIV,EAAU,gBACZ,GAAI,CACF,MAAMW,EAAW,MAAM,MAAM,eAAgB,CAC3C,QAAS,CACP,cAAiB,UAAUX,EAAU,WAAW,EAAA,CAClD,CACD,EACD,GAAI,CAACW,EAAS,GACZ,MAAM,IAAI,MAAM,0BAA0B,EAE5C,MAAMC,EAAO,MAAMD,EAAS,KAAA,EAC5BL,EAAQ,MAAQM,EAAK,SAAW,CAAA,CAAC,OAC1BC,EAAU,CACjBJ,EAAM,MAAQI,EAAI,OAAA,QACpB,CACEL,EAAU,MAAQ,EAAA,MAEXR,EAAU,gBACnBM,EAAQ,MAAQN,EAAU,aAC1BQ,EAAU,MAAQ,KAElBC,EAAM,MAAQ,2DACdD,EAAU,MAAQ,GACpB,CACD,EAED,MAAMM,EAAmBC,GAAc,CACrCb,EAAa,uBAAuBa,CAAI,EACxCX,EAAO,KAAK,GAAG,CAAA,gBA1FfY,EAAA,EAAAC,EA4CM,MA5CNC,EA4CM,CA3CJC,EA0CM,MA1CNC,EA0CM,aAzCJD,EAKM,MAAA,CALD,MAAM,oBAAkB,CAC3BA,EAAiD,KAAA,CAA7C,MAAM,oBAAA,EAAqB,eAAa,EAC5CA,EAEI,IAAA,CAFD,MAAM,uBAAA,EAAwB,+CAEjC,CAAA,OAGSX,EAAA,OAAXQ,EAAA,EAAAC,EAGM,MAHNI,EAGMC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CAFJH,EAA+C,IAAA,CAA5C,MAAM,iCAAA,EAAiC,KAAA,EAAA,EAC1CA,EAAsC,IAAA,CAAnC,MAAM,MAAA,EAAO,qBAAkB,EAAA,CAAA,KAGpBV,EAAA,OAAhBO,IAAAC,EAEM,MAFNM,EAEM,CADJJ,EAA0C,IAAA,KAAA,CAAvCG,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAAuB,cAAf,SAAM,EAAA,GAASK,EAAA,MAAIf,EAAA,KAAK,EAAA,CAAA,CAAA,MAGrBH,EAAA,MAAQ,SAAM,GAA9BU,EAAA,EAAAC,EAGM,MAHNQ,EAGMH,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CAFJH,EAA4C,SAAzC,wCAAqC,EAAA,EACxCA,EAA+E,IAAA,CAA5E,MAAM,cAAA,EAAe,sDAAmD,EAAA,CAAA,MAG7EH,EAAA,EAAAC,EAmBM,MAnBNS,EAmBM,CAlBJP,EAiBK,KAjBLQ,EAiBK,QAhBHV,EAeKW,EAAA,KAAAC,EAfcvB,EAAA,MAARS,QAAXE,EAeK,KAAA,CAfwB,IAAKF,EAAK,GAAI,MAAM,sDAAA,GAC/CI,EAaM,MAbNW,EAaM,CAZJX,EAGM,MAHNY,EAGM,CAFJZ,EAA6F,IAA7Fa,EAA6FC,EAAA,IAA5C,KAAKlB,EAAK,SAAS,EAAE,eAAA,CAAc,EAAA,CAAA,EACpFI,EAAqE,IAArEe,EAAqED,EAAzBlB,EAAK,aAAa,EAAA,CAAA,CAAA,GAEhEI,EAOM,MAPNgB,EAOM,CANJhB,EAEO,OAAA,CAFA,MAAKiB,EAAErB,EAAK,WAAU,GAAA,iBAAA,iBAAA,CAAA,EAA+C,mBAC1DA,EAAK,WAAU,KAAQ,YAAa,KACtD,CAAA,EACAI,EAES,SAAA,CAFA,QAAKkB,GAAEvB,EAAgBC,CAAI,EAAG,MAAM,0EAAA,EAA2E,SAExH,EAAAuB,CAAA,CAAA"}
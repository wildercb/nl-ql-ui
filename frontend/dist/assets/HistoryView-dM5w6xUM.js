import{a as p,r as u,x as v,c as o,b as e,h as f,t as c,F as g,C as m,i as _,o as r,n as b}from"./vendor-B7ScCEbZ.js";import{u as w}from"./index-CAIeypSO.js";import{u as k}from"./history-Bom-zHWm.js";const S={class:"flex-1 bg-gray-900 text-white"},C={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},H={key:0,class:"text-center"},B={key:1,class:"bg-red-900 border border-red-700 text-red-300 px-4 py-3 rounded-lg"},F={key:2,class:"text-center text-gray-500 py-8"},L={key:3,class:"bg-gray-800 shadow-xl rounded-lg overflow-hidden"},V={class:"divide-y divide-gray-700"},q={class:"flex items-center justify-between"},A={class:"flex-grow"},E={class:"text-sm text-gray-400 truncate"},N={class:"font-semibold text-white mt-1"},j={class:"flex items-center space-x-4"},z=["onClick"],G=p({__name:"HistoryView",setup(D){const i=w(),y=k(),x=_(),n=u([]),l=u(!0),d=u(null);v(async()=>{if(i.isAuthenticated)try{const s=await fetch("/api/history",{headers:{Authorization:`Bearer ${i.accessToken}`}});if(!s.ok)throw new Error("Failed to fetch history.");const t=await s.json();n.value=t.history||[]}catch(s){d.value=s.message}finally{l.value=!1}else i.isGuestSession?(n.value=i.guestHistory,l.value=!1):(d.value="Please sign in or start a guest session to view history.",l.value=!1)});const h=s=>{y.setSelectedHistoryItem(s),x.push("/")};return(s,t)=>(r(),o("div",S,[e("div",C,[t[3]||(t[3]=e("div",{class:"text-center mb-8"},[e("h1",{class:"text-3xl font-bold"},"Query History"),e("p",{class:"text-lg text-gray-400"}," Review your past queries and their results. ")],-1)),l.value?(r(),o("div",H,t[0]||(t[0]=[e("i",{class:"fas fa-spinner fa-spin text-3xl"},null,-1),e("p",{class:"mt-2"},"Loading history...",-1)]))):d.value?(r(),o("div",B,[e("p",null,[t[1]||(t[1]=e("strong",null,"Error:",-1)),f(" "+c(d.value),1)])])):n.value.length===0?(r(),o("div",F,t[2]||(t[2]=[e("p",null,"No translation history available yet.",-1),e("p",{class:"text-sm mt-2"},"Start translating queries to see your history here.",-1)]))):(r(),o("div",L,[e("ul",V,[(r(!0),o(g,null,m(n.value,a=>(r(),o("li",{key:a.id,class:"p-4 hover:bg-gray-700 transition-colors duration-200"},[e("div",q,[e("div",A,[e("p",E,c(new Date(a.timestamp).toLocaleString()),1),e("p",N,c(a.natural_query),1)]),e("div",j,[e("span",{class:b(a.confidence>.8?"text-green-400":"text-yellow-400")}," Confidence: "+c((a.confidence*100).toFixed(0))+"% ",3),e("button",{onClick:I=>h(a),class:"px-3 py-1 bg-blue-600 hover:bg-blue-700 rounded-md text-sm font-semibold"}," View ",8,z)])])]))),128))])]))])]))}});export{G as default};
//# sourceMappingURL=HistoryView-dM5w6xUM.js.map
